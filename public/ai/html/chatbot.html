<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<base href="../">
	<title>AI Chatbot - PSAU Admission System</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
	<link rel="stylesheet" href="css/style.css">
	<style>
		/* Overall tighter layout and smaller sizes */
		.main-content { max-width: calc(100% - 16px); margin-left: 8px; margin-right: 8px; }
		.chat-container { height: 45vh; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 0.5rem; padding: 0.75rem; margin-bottom: 0.75rem; }
		.message { margin-bottom: 1rem; padding: 0.5rem 1rem; border-radius: 1rem; max-width: 80%; }
		/* Smaller message bubbles */
		.message { margin-bottom: 0.75rem; padding: 0.4rem 0.75rem; max-width: 70%; font-size: 0.95rem; }
		.bot-message { background-color: #f0f2f5; margin-right: auto; line-height: 1.5; }
		.bot-message ul { margin: 0.75rem 0; padding-left: 1.5rem; list-style-type: disc; }
		.bot-message li { margin: 0.5rem 0; line-height: 1.4; padding-left: 0.25rem; }
		.bot-message br { margin: 0.25rem 0; }
		.bot-message p { margin: 0.5rem 0; }
		.user-message { background-color: #0d6efd; color: #fff; margin-left: auto; }
		.faq-options-bar { display: flex; flex-wrap: wrap; gap: 0.4rem; margin-bottom: 0.75rem; justify-content: flex-start; }
		.faq-option { cursor: pointer; padding: 0.4rem 0.75rem; border: 1px solid #dee2e6; border-radius: 0.5rem; background: #f8f9fa; transition: all 0.3s ease; margin: 0.2rem 0; font-size: 0.92rem; }
		.faq-option:hover { background-color: #e2e6ea; transform: translateY(-2px); }
		.typing-indicator { display: none; margin-bottom: 1rem; }
		.typing-indicator span { display: inline-block; width: 8px; height: 8px; background-color: #6c757d; border-radius: 50%; margin-right: 3px; animation: typing 1s infinite; }
		.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
		.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
		@keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

		/* Smaller input and button */
		.input-group .form-control { height: 2.25rem; font-size: 0.95rem; padding: 0.375rem 0.5rem; }
		.input-group .btn { height: 2.25rem; font-size: 0.95rem; padding: 0.375rem 0.75rem; }

		/* Adjust layout when sidebar is present (desktop) */
		@media (min-width: 992px) {
			.with-sidebar .main-content { max-width: none; width: calc(100% - 260px); margin-left: 260px; margin-right: 0; }
		}
	</style>
</head>
<body class="<?php echo !empty($showSidebar) ? 'with-sidebar' : ''; ?>">
	<?php include __DIR__ . '/../../templates/mobile.html'; ?>
	<div class="desktop-nav">
		<?php include __DIR__ . '/../../templates/navbar.html'; ?>
		<?php if (!empty($showSidebar)) { include __DIR__ . '/../../templates/sidebar.html'; } ?>
	</div>

	<div class="main-content container py-4">
		<div class="page-title mb-3">
			<h2><i class="bi bi-robot me-2"></i>AI Chatbot</h2>
			<p class="text-muted">Ask questions about admissions.</p>
		</div>

		<div class="card">
			<div class="card-body">
				<div id="chatContainer" class="chat-container">
					<div class="message bot-message">Welcome to PSAU Admission FAQ Chatbot! How can I help you today?</div>
				</div>
				<div id="faqOptionsBar" class="faq-options-bar" style="display:none;"></div>
				<div id="typingIndicator" class="typing-indicator">
					<span></span><span></span><span></span>
				</div>
				<div class="input-group">
					<input type="text" id="userInput" class="form-control" placeholder="Type your question here...">
					<button class="btn btn-primary" id="sendButton">Send</button>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<script src="js/common.js"></script>
	<script>
		// Configure Flask API base (adjust port if your Flask app runs on a different port)
		window.CHATBOT_API_BASE = 'http://127.0.0.1:5000';
	</script>
	<script src="ai/js/chatbot.js?v=1"></script>
</body>
</html>


